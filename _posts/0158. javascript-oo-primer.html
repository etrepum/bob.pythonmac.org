---
categories: javascript, AJAX
date: 2005/07/18 04:10:31
guid: /?p=158
permalink: http://bob.pythonmac.org/archives/2005/07/18/javascript-oo-primer/
tags: ''
title: Javascript OO Primer
---
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.6: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5951 2009-05-18 18:03:10Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left{
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<!-- -*- mode: rst -*- -->
<div class="section" id="prototypes">
<h2>Prototypes</h2>
<p>JavaScript is a non-traditional Object Oriented language in that it uses
prototype based, rather than class based inheritance.  Some other languages
that implement prototype-based OO are Self, Lua, Io, NewtonScript, Slate,
and Prothon.</p>
<p>The basic premise of prototype-based OO is that new objects are created from
similar objects, much like using a copy machine.  The new object is largely
indistinguishable from the prototype used to create it.  It is possible
to modify the new object without affecting the prototype, and this
new object may be used as the prototype for other objects.</p>
</div>
<div class="section" id="functions">
<h2>Functions</h2>
<p>In JavaScript, functions are first-class objects like any other.  They may be
stored in variables, passed as arguments, and properties may be added or
removed from them dynamically (e.g. <tt class="docutils literal">func.foo = &quot;bar&quot;</tt>).  Functions are
also the building block for creating new objects.  There are three different
syntaxes for invoking a function:</p>
<dl class="docutils">
<dt>Function Call:</dt>
<dd><p class="first"><tt class="docutils literal">func(a, b)</tt></p>
<p>Execute the body of <tt class="docutils literal">func</tt> with two arguments, <tt class="docutils literal">a</tt> and <tt class="docutils literal">b</tt>, and the special
<tt class="docutils literal">this</tt> variable set to the global object (typically <tt class="docutils literal">window</tt> in a browser).
The value of this expression will be the value given by the terminal <tt class="docutils literal">return</tt>
statement, or <tt class="docutils literal">undefined</tt> if no <tt class="docutils literal">return</tt> statement is reached before the
execution completes.</p>
<p class="last">Note that even if <tt class="docutils literal">func</tt> is a local variable in another function's scope,
<tt class="docutils literal">this</tt> will still be set to the global object!</p>
</dd>
<dt>Method Call:</dt>
<dd><p class="first"><tt class="docutils literal">obj.func(a, b)</tt></p>
<p>Execute the body of <tt class="docutils literal">func</tt> with two arguments, <tt class="docutils literal">a</tt> and <tt class="docutils literal">b</tt>, and special
<tt class="docutils literal">this</tt> variable set to <tt class="docutils literal">obj</tt>.  The value of this expression will be the
value given by the terminal <tt class="docutils literal">return</tt> statement, or <tt class="docutils literal">undefined</tt> if no
<tt class="docutils literal">return</tt> statement is reached before the execution completes.</p>
<p class="last">Note that this is actually a different syntax entirely than the function call.
<tt class="docutils literal">func</tt> is not bound to <tt class="docutils literal">obj</tt> in any way, and that a reference to <tt class="docutils literal">func</tt> as
a local variable or on another object will behave differently if called!</p>
</dd>
<dt>Constructor:</dt>
<dd><p class="first"><tt class="docutils literal">new func(a, b)</tt></p>
<p>Execute the body of <tt class="docutils literal">func</tt> with two arguments, <tt class="docutils literal">a</tt> and <tt class="docutils literal">b</tt>, and special
<tt class="docutils literal">this</tt> variable set to a new object (<tt class="docutils literal">newObject</tt>) cloned from
<tt class="docutils literal">func.prototype</tt>.  The value of this expression is always <tt class="docutils literal">newObject</tt>.  If
any <tt class="docutils literal">return</tt> statement is reached during execution, its value is ignored.</p>
<p>The expression <tt class="docutils literal">(newObject instanceof func)</tt> will evaluate to <tt class="docutils literal">true</tt> so long
as <tt class="docutils literal">func.prototype</tt> is not replaced with another object.  Additionally,
<tt class="docutils literal">(newObject instanceof T)</tt> will evaluate to <tt class="docutils literal">true</tt> for all values of <tt class="docutils literal">T</tt>
where <tt class="docutils literal">(func.prototype instanceof T)</tt> evalutes to <tt class="docutils literal">true</tt>.</p>
<p><tt class="docutils literal">newObject</tt> is a copy-on-write clone of <tt class="docutils literal">func.prototype</tt>.  This means that
any property set on <tt class="docutils literal">newObject</tt> <em>will not</em> propagate to <tt class="docutils literal">func.prototype</tt>.
Conversely, any property added or changed on <tt class="docutils literal">func.prototype</tt> <em>will</em>
propagate to <tt class="docutils literal">newObject</tt>, unless that property has been set on <tt class="docutils literal">newObject</tt>.</p>
<p class="last">All objects, including <tt class="docutils literal">func.prototype</tt>, have this prototype property
delegation behavior.  This means that properties from <tt class="docutils literal">func.prototype</tt>'s
prototype will propagate to <tt class="docutils literal">newObject</tt> unless otherwise set by
<tt class="docutils literal">func.prototype</tt> or <tt class="docutils literal">newObject</tt>, and so on.  This prototype property
delegation chain terminates with <tt class="docutils literal">Object.prototype</tt>, so properties set on
<tt class="docutils literal">Object.prototype</tt> are accessible (and enumerable) from every object in the
whole interpreter!  Due to this, it's generally wise to avoid modifying
<tt class="docutils literal">Object.prototype</tt> (or really, any built-in prototype) whenever possible.</p>
</dd>
</dl>
</div>
<div class="section" id="demonstration">
<h2>Demonstration</h2>
<pre class="literal-block">
// set up the prototype
func.prototype.protoProperty = 1;
func.prototype.anotherProperty = 2;

// create a new object from the prototype
var newObject = new func(a, b);

// the prototype's properties are visible on newObject
assert( newObject.protoProperty == 1 );
assert( newObject.anotherProperty == 2 );

// newObject can be modified without affecting its prototype
newObject.anotherProperty = 3;
assert( newObject.anotherProperty == 3 );
assert( func.prototype.anotherProperty == 2 );

// func.prototype can be modified, and it will affect
// newObject unless the modified properties were written to
// in newObject
func.prototype.protoProperty = 0;
func.prototype.anotherProperty = 1;
assert( newObject.protoProperty == 0 );
assert( newObject.anotherProperty == 3 );
</pre>
</div>
</div>
</body>
</html>
