---
categories: javascript, MochiKit, AJAX
date: 2005/07/30 23:52:39
guid: /?p=167
permalink: http://bob.pythonmac.org/archives/2005/07/30/mochikit-060-released/
tags: ''
title: MochiKit 0.60 Released
---
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.6: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5951 2009-05-18 18:03:10Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left{
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<!-- -*- mode: rst -*- -->
<p>I went ahead and created a mailing list for development of and with MochiKit: <a class="reference external" href="http://groups-beta.google.com/group/mochikit">Google Groups: MochiKit</a>.  No public <a class="reference external" href="http://www.edgewall.com/trac/">Trac</a> instance yet, but we're planning to have one soon.</p>
<p><a class="reference external" href="http://mochikit.com/download.html">MochiKit 0.60</a> was released yesterday (coincidentally, also my birthday, from which I'm still recovering).  All of the changes are relatively minor; mostly just fixing distribution mistakes.  For those of you that have the subversion repository checked out, you'll notice that the layout of the distribution zips is slightly different (namely that <tt class="docutils literal">MochiKit</tt> is <tt class="docutils literal">lib/MochiKit</tt> in the zip).  That's because <a class="reference external" href="http://openjsan.org/">JSAN</a> expects a <a class="reference external" href="https://master.openjsan.org/documentation/dists.html">certain distribution layout</a>, and my repository is almost, but not quite, in that form.  So, if you had downloaded the zip, I apologize that the examples and tests didn't run out of the box.  I may rearrange the repository to match at some point, but for now, this works for me.</p>
<p>Aside from the obligatory bug fixes, there are two new features: a more general version of <tt class="docutils literal">getElementsByTagAndClassName</tt> which doesn't assume you want to ask <tt class="docutils literal">window.document</tt> for tags, plus a &quot;packed&quot; version of <a class="reference external" href="http://mochikit.com/">MochiKit</a>.</p>
<p>The &quot;packed&quot; version of <a class="reference external" href="http://mochikit.com/">MochiKit</a> lives at <tt class="docutils literal">packed/MochiKit/MochiKit.js</tt>.  It is the entirety  of <a class="reference external" href="http://mochikit.com/">MochiKit</a> concatenated together and comment-stripped.  This is about 108k (24k with <a class="reference external" href="http://httpd.apache.org/docs/2.0/mod/mod_deflate.html">gzip compression</a>) as-is, but run through a real whitespace-annihilating JavaScript packer it should get considerably smaller, since the coding conventions for <a class="reference external" href="http://mochikit.com/">MochiKit</a> dictate lots of whitespace (with spaces instead of tabs, at that).  While the style guide currently only resides somewhere between my brain and my fingers, it's more or less like what you'd get if <a class="reference external" href="http://python.org/peps/pep-0007.html">PEP 7</a> and <a class="reference external" href="http://python.org/peps/pep-0008.html">PEP 8</a> got drunk one night and a baby JavaScript style guide popped out several months later.</p>
<p><tt class="docutils literal">packed/MochiKit/MochiKit.js</tt> is API compatible with <tt class="docutils literal">lib/MochiKit/MochiKit.js</tt>; meaning, you may refer to it directly with a <tt class="docutils literal">&lt;script&gt;</tt> tag, or you may import it with <tt class="docutils literal"><span class="pre">JSAN.use(&quot;MochiKit.MochiKit&quot;)</span></tt> or <tt class="docutils literal"><span class="pre">dojo.require(&quot;MochiKit.MochiKit&quot;)</span></tt> (<tt class="docutils literal">&quot;MochiKit.*</tt> should work in svn, but not 0.60 because I forgot to add a <tt class="docutils literal">__package__.js</tt>).  The reason to use the packed MochiKit is that it's a single file and saves a couple round-trips to the server.  The packed <a class="reference external" href="http://mochikit.com/">MochiKit</a> is <em>everything</em> though.  If you want an even smaller distribution consisting of a subset of <a class="reference external" href="http://mochikit.com/">MochiKit</a>, you'll have to roll your own.  I believe that <a class="reference external" href="http://dojotoolkit.org/">Dojo Toolkit</a> may already have this capability (though it's not documented so I don't know how to do it or what state it's in), and there's <a class="reference external" href="http://search.cpan.org/~adamk/JavaScript-Librarian/">JavaScript::Librarian</a> coming from the <a class="reference external" href="http://openjsan.org/">JSAN</a> front.  The current stupid packing script is just a temporary means to an end, I intend for it to be replaced by one of those two when they're ready and I've learned how to use them.</p>
<p>I recommend the following process for developing with <a class="reference external" href="http://mochikit.com/">MochiKit</a> (if only because this is how we do it):</p>
<dl class="docutils">
<dt>Development:</dt>
<dd>Use <a class="reference external" href="http://mochikit.com/">MochiKit</a> unpacked, as-is, from the trunk of the repository or the latest distribution.  You may even use <a class="reference external" href="http://svnbook.red-bean.com/en/1.1/ch07s04.html">svn:externals</a> to do this (we do).  Using your loading method of choice, load all of <a class="reference external" href="http://mochikit.com/">MochiKit</a> (e.g. <tt class="docutils literal"><span class="pre">JSAN.use(&quot;MochiKit.MochiKit&quot;)</span></tt> or <tt class="docutils literal">&lt;script <span class="pre">src=&quot;lib/MochiKit/MochiKit.js&quot;</span> <span class="pre">type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span></tt>).</dd>
<dt>Production:</dt>
<dd>In your staging branch, replace the <tt class="docutils literal">lib</tt> tree with the <tt class="docutils literal">packed</tt> tree from the latest release distribution of <a class="reference external" href="http://mochikit.com/">MochiKit</a> (or change the <a class="reference external" href="http://svnbook.red-bean.com/en/1.1/ch07s04.html">svn:externals</a> to point to a release tag in the repo).  Ensure that everything works as expected.  Deploy!</dd>
</dl>
<p>2005-07-29      v0.60</p>
<ul class="simple">
<li>Beefed up the MochiKit.DOM test suite</li>
<li>Fixed return value for MochiKit.DOM.swapElementClass, could return
false unexpectedly before</li>
<li>Added an optional &quot;parent&quot; argument to
MochiKit.DOM.getElementsByTagAndClassName</li>
<li>Added a &quot;packed&quot; version in packed/MochiKit/MochiKit.js</li>
<li>Changed build script to rewrite the URLs in tests to account for the
JSAN-required reorganization</li>
<li>MochiKit.Compat to potentially work around IE 5.5 issues
(5.0 still not supported).  Test.Simple doesn't seem to work there,
though.</li>
<li>Several minor documentation corrections</li>
</ul>
</div>
</body>
</html>
